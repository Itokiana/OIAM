<div class="row">
	<div class="col-sm-3">
		<%= render partial: "recruteurs/left_link_bar" %>
	</div>

	<div class="col-sm-9">
		<center>PROMESSE D'EMBAUCHE</center>
		<%= form_for @promise , url: save_promise_to_hire_path(@cadre.cadre.id) do |f| %>
		<div class="row">
			<div class="col-sm-6">
				<div>
					<% unless @client.image.nil? %>
						<%= image_tag(@client.image, alt: 'photo de profil', class:'photo_ako', width:'250px')%>
					<% end %>
				</div>
				<div><%= @job.intitule_pote %></div>
				<div>
					<%= @job.contrat_cdi ? "CONTRAT À DURÉE INDÉTERMINÉE" : "CONTRAT À DURÉE DÉTERMINÉE" %>
				</div>
			</div>
			
			<div class="col-sm-6">
				<div><%= @cadre.first_name %></div>
				<div><%= @cadre.last_name %></div>
				<div>					
					Date de naissance
				</div>
				<div>
					Lieu de naissance
				</div>
				<div>
					N° sécurité sociale
				</div>
			</div>
		</div>

		<table class="table">
			<tr>
				<td><%= f.label :date_poste, "Date de prise de poste" %></td>
				<td><%= f.date_field :date_poste, class:"form-control", value: @job.date_poste, required:true %></td>
			</tr>
			<tr>
				<td>Rémunération fixe <br>(k€ bruts mensuels)</td>
				<td>
					<div>
						<%= f.number_field :remuneration_fixe, required:true, class:"form-control", value: @job.remuneration, required:true %>
					</div>
					<div>
						<%= f.radio_button :remuneration_fixe_date, "12", id:'post_12', class:'js-post-mois', required:true %>
						<%= f.label :remuneration_fixe_date, "12 mois", for:'post_12' %>
					</div>
					<div>
						<%= f.radio_button :remuneration_fixe_date, "13", id:'post_13', class:'js-post-mois', required:true %>
						<%= f.label :remuneration_fixe_date, "13 mois", for:'post_13' %>
					</div>
					<div>
						<%= f.radio_button :remuneration_fixe_date, "Personnalisé", id:'post_perso', class:'js-post-mois', required:true %>
						<%= f.label :remuneration_fixe_date, "Personnalisé", for:'post_perso' %>
						<%= f.number_field :remuneration_fixe_date, placeholder:'nombre de mois',style:'display:none;',id:'input-perso' %>
					</div>
				</td>
			</tr>
			<tr>
				<td>Rénumération variable <br>(k€ bruts annuels)</td>
				<td>
					<table class="table">
						<tr>
							<div>
								<%= f.radio_button :remuneration_variable, "Oui", id:'post_oui', class:'js-post-choix', required:true %>
								<%= f.label :remuneration_variable, "Oui", for:'post_oui' %>
								<%= f.number_field :remuneration_var_info, placeholder:'ex: 10%', id:'js-input-choix', style:'display:none', disabled:true %>
							</div>
							<div>
								<%= f.radio_button :remuneration_variable, "Non", id:'post_nom', class:'js-post-choix', required:true %>
								<%= f.label :remuneration_variable, "Non", for:'post_nom' %>
							</div>
						</tr>
					</table>
				</td>
			</tr>
		</table>

		<div class="form-group">
			<center>Précalcul honoraires OIAM<br>
			11550€</center> <!-- price -->
		</div>

		<div class="form-group">
			<center><%= f.label :remuneration_avantage, "Avantages ou autre précision sur la rénumération" %></center>
			<center><%= f.text_area :remuneration_avantage, required:true, rows:3, class:"form-control", required:true %></center>
		</div>

		<table class="table">
			<tr>
				<td><%= f.label :date_de_validite, "Date de validité" %></td>
				<td><%= f.date_field :date_de_validite, required:true, class:"form-control", required:true %></td>
			</tr>
			<tr>
				<td><%= f.label :signature_entreprise, "Signature électronique entreprise" %></td>
				<td class="form-group">
					<img id="addImage" src="#" alt="signature entreprise" height="150px">
					<%= f.file_field :signature_entreprise, required:true, class:"form-control" %>
					<!-- Télécharger une image -->
				</td>
			</tr>
			<tr>
				<td>Signature électronique candidat</td>
				<td>
					<img src="#" alt="signature candidat">
				</td>
			</tr>
		</table>

		<div class="form-group">
			<center><%= f.submit("ENVOYER") %></center>
		</div>

	<% end %>
	</div>

</div>


<script type="text/javascript">
	function shwoMyImage(input) {
		if (input.files && input.files[0]) {
			var reader = new FileReader();
			reader.onload = function(e) {
				$('#addImage').attr('src', e.target.result);
			}
			reader.readAsDataURL(input.files[0]);
		}
	}

	$("#promise_to_hire_signature_entreprise").change(function() {
		shwoMyImage(this);
	});


	$('.js-post-mois').change(function() {
	  if (this.value == 'Personnalisé'){
	  	$('#input-perso').show()
		$('#input-perso').attr("required", true);
		$('#input-perso').removeAttr("disabled");
	  }else{
	  	$('#input-perso').attr("required", false);
	  	$('#input-perso').attr('disabled', 'disabled');
		$('#input-perso').hide()
	  }
	});

	$(".js-post-choix").change(function(){
		if (this.value == 'Oui'){
		  	$('#js-input-choix').show()
			$('#js-input-choix').attr("required", true);
			$('#js-input-choix').removeAttr("disabled");
		}else{
		  	$('#js-input-choix').attr("required", false);
		  	$('#js-input-choix').attr('disabled', 'disabled');
			$('#js-input-choix').hide()
		}
	});


</script>