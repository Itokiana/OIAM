<% @title="Candidats" %>
<link rel="stylesheet" href="/css/ag-admin.css" />
<link rel="stylesheet" href="/css/mes_cand_admin.css" />
<script src="https://kit.fontawesome.com/d06d35ede2.js" crossorigin="anonymous"></script>
<style>

.nw-cont {
  width: 100%;
  margin-top: 20px;
}

.cont-filter {
  position: relative;
  width: 400px;
  float: right;
}
.filter {
  padding-top: 20px;
  padding-bottom: 20px;
/*      border-bottom: 1px solid rgba(0,0,0,.1);*/
}

.filter span {
  align-items: flex-end;
  background: #E3D7BF;
  color: #fff;
  cursor: pointer;
  font-size: 10px;
  padding: 10px 30px;
  text-transform: uppercase;
  border: 1px solid #E3D7BF;
  text-decoration: none;
}

.filter span:hover {
  background: #fff;
  color: #E3D7BF;
  border: 1px solid #E3D7BF;
  text-decoration: none;
}

.candd {
  clear: both;
  padding: 20px;
  margin-top: 20px;
  border-top: 1px solid rgba(0,0,0,.1);
  border-bottom: 1px solid rgba(0,0,0,.1);
}

.desc-candd {
  margin-top: 30px;
  text-align: center;
}

.name {
  text-decoration: none;
  text-align: center;
  font-size: 16px;
  font-weight: bold;
}

.score {
  text-decoration: none;
  text-align: center;
  font-size: 14px;
}

.cont-btn {
  margin-top: 40px;
}

.entr-fit {
  font-size: 14px;
}

.cont-btn a {
  color: #fff !important;
  background: #d6b36a !important;
  padding: 10px 40px !important;
  cursor: pointer !important;
  border: 1px solid #d6b36a !important;
}

.cont-btn a:hover {
  border: 1px solid #d6b36a !important;
  color: #d6b36a !important;
  background: #fff !important;
}

  * {
    line-height: 2;
  }

  .ico-cand a {
    background: #d6b36a;
    color: #fff !important;
    border:1px solid #d6b36a;
    padding: 10px 30px;
    margin-top: 50px;
  }

  .ico-cand a:hover {
    background: #fff;
    color: #d6b36a !important;
  }
  .ico-cand a:focus {
    color: #fff;
  }

  .fcp-box .a {
    text-decoration: none;
    background: #fff;
    color: #d6b36a;
    padding: 20px 40px;
    border: 1px solid #d6b36a;
  }

  .fcp-box .a:hover {
    text-decoration: none;
    background: #d6b36a;
    border: 1px solid #d6b36a;
    color: #fff;
  }

.fcp-box .fc-item-all .list-candidat:hover .fci-infos, .fcp-box .fc-item-all .list-candidat:active .fci-infos {
    height: 200px !important;
    transition: all 500ms ease-in-out !important;
}

</style>
<div class="client-column">
  <div class="client-menu-left">
    <%= render partial: "admin_cadre/left_menu_link" %>
  </div>
  <div class="cp-box">
  	<div>
  		<div class="fcp-box">
        <h3 class="title" style="color: #d6b36a !important;">ENTRETIEN FIT</h3>

<!--  CANDIDATS  -->

        <div class="nw-cont">
          <div class="cont-candd">

          <!-- --------------------------------------------------------------- -->
          <!--  CANDIDATS ANAKY RAY NO ETO RY FALY -->
          <% if @cadre_infos.empty? %>
            Aucun candidat pour le test fit
          <% else %>
            <% @cadre_infos.each do |cadre| %>
             <div class="candd">
               <div class="row">
               <div class="col-sm-3">
                 <% unless cadre.image.nil? %>
                   <%= image_tag(cadre.image, alt: 'photo de profil', style: 'width:120px')%>
                 <% else %>
                    <img src="/image/profie.png" alt="photo profil candidats", width="120px" />
                 <% end %>
               </div>
               <div class="col-sm-6">
                 <div class="desc-candd">
                   <h4 class="name"><%= cadre.first_name %> <%= cadre.last_name %></h4>
                   <h4 class="score">Score OIAM : <span><%= cadre.score_potential %></h4>
                    <% unless cadre.agenda_admin.nil? %>
                     <h4 class="entr-fit"><i class="fas fa-edit fa-lg"></i>Entretien fit le:   <span data-times="<%= cadre.agenda_admin.entretien_date.strftime("%Y/%m/%d à %Hh%M") %>" class="currentDateEntretien"></span></h4>
                   <% else %>
                     <h4 class="entr-fit"><i class="fas fa-edit fa-lg"></i>Entretien fit en attente.</h4>
                    <% end %>
                 </div>
               </div>
               <div class="col-sm-3">
                 <div class="cont-btn">
                 <a href="<%= post_avis_candidats_fit_path(cadre.id) %>">GERER</a>
                 </div>
               </div>
               </div>
             </div>
             <% end %>
           <% end %>
             <!-- --------------------------------------------------------------------- -->

           </div>
         </div>


    </div>

  	</div>
  </div>
</div>

<script type="text/javascript">
/*----------------------------------------------*/
  if (document.URL.indexOf('#') == -1) {
    url = document.URL + '#';
    location = '#';
    location.reload(true);
  }
/*----------------------------------------------*/
</script>

<script data-turbolinks-track="reload" type="text/javascript" src="/js/moment-js.js"></script>

<script type="text/javascript">
  var month = ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'];
  var day = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'];
  let $elementDate = $('.currentDateEntretien');

  $elementDate.each(function () {
    let dateUTC = moment.utc($(this).data().times);
    let dateGet = new Date(dateUTC.local());
    let dateString = day[dateGet.getDay()] + ' ' + dateGet.getDate() + ' ' + month[dateGet.getMonth()] + ' ' + dateGet.getFullYear();

    let minute = dateGet.getMinutes()
    if((minute+"").length == 1){
      minute = "0"+minute
    }

    $(this).html(dateString + ' à ' + dateGet.getHours() + 'h:'+ minute );

  });
</script>
