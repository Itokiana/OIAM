<link rel="stylesheet" href="/css/client_profil.css" />
<link rel="stylesheet" href="/css/mes_cand_admin.css" />
<script src="https://kit.fontawesome.com/d06d35ede2.js" crossorigin="anonymous"></script>
<style>
  * {
    line-height: 2;
  }

  .ico-cand a {
    background: #d6b36a;
    color: #fff !important;
    border:1px solid #d6b36a;
    padding: 10px 30px;
    margin-top: 50px;
  }

  .ico-cand a:hover {
    background: #fff;
    color: #d6b36a !important;
  }
  .ico-cand a:focus {
    color: #fff;
  }

  .fcp-box .a {
    text-decoration: none;
    background: #fff;
    color: #d6b36a;
    padding: 20px 40px;
    border: 1px solid #d6b36a;
  }

  .fcp-box .a:hover {
    text-decoration: none;
    background: #d6b36a;
    border: 1px solid #d6b36a;
    color: #fff;
  }

.fcp-box .fc-item-all .list-candidat:hover .fci-infos, .fcp-box .fc-item-all .list-candidat:active .fci-infos {
    height: 200px !important;
    transition: all 500ms ease-in-out !important;
}

</style>
<div class="client-column">
  <div class="client-menu-left">
    <%= render partial: "admin_cadre/left_menu_link" %>
  </div>
  <div class="cp-box">
  	<div>
  		<div class="fcp-box">
      <h3 class="title" style="color: #d6b36a !important;">ENTRETIEN FIT</h3>
      <h3 class="title t2">Choisissez la suite a donner a ces candidats et rediger votre avis recruteur</h3>
      <br><br><br>
          <a class="a" href="<%= admin_dashboard_candidate_path %>">
            SÉLECTIONNER DES CANDIDATS À SUIVRE
          </a>
      <div class="fc-item">
        <div class="fc-item-all">

<!--  CANDIDATS  -->

        <% unless @cadres.empty? %>
          <% @cadres.each do |cadre| %>
            <div class="list-candidat">
              <div class="fci-image">
                <% unless cadre.image.nil? %>
                  <%= image_tag(cadre.image, alt: 'photo de profil')%>
                <% else %>
                  <img src="/image/profie.png" alt="photo profil candidats">
                <% end %>
              </div>
              <div class="fci-infos">
                <p class="name"><%= cadre.first_name %> <%= cadre.last_name %> </p>
                <p class="score">Score OIAM : <span><%= cadre.score_potential %></span></p>

                <div class="ico-cand">
                  <a href="<%= post_avis_candidats_fit_path(cadre.id) %>">GERER</a>
                </div>

                <div style="margin-top: 10px">
                  <% unless cadre.agenda_admin.nil? %>
                    <p>
                      <i class="fas fa-edit fa-lg"></i>Entretien fit le:
                      <span data-times="<%= cadre.agenda_admin.entretien_date.strftime("%Y-%m-%d %H:%M") %>" class="currentDateEntretien"></span>
                    </p>
                  <% else %>
                    <p>
                      <i class="fas fa-edit fa-lg"></i>Entretien fit en attente.
                    </p>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
          <% end %>
      </div>
      </div>

    </div>

  	</div>
  </div>
</div>

<script type="text/javascript">
/*----------------------------------------------*/
  if (document.URL.indexOf('#') == -1) {
    url = document.URL + '#';
    location = '#';
    location.reload(true);
  }
/*----------------------------------------------*/
</script>

<script data-turbolinks-track="reload" type="text/javascript" src="/js/moment-js.js"></script>

<script type="text/javascript">
  var month = ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'];
  var day = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'];
  let $elementDate = $('.currentDateEntretien');

  $elementDate.each(function () {
    let dateUTC = moment.utc($(this).data().times);
    let dateGet = new Date(dateUTC.local());
    let dateString = day[dateGet.getDay()] + ' ' + dateGet.getDate() + ' ' + month[dateGet.getMonth()] + ' ' + dateGet.getFullYear();

    let minute = dateGet.getMinutes()
    if((minute+"").length == 1){
      minute = "0"+minute
    }

    $(this).html(dateString + ' à ' + dateGet.getHours() + 'h:'+ minute );

  });
</script>
